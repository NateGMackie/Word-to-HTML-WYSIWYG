import {
  $isScrollableTablesActive,
  TableCellNode,
  TableNode,
  registerTableCellUnmergeTransform,
  registerTablePlugin,
  registerTableSelectionObserver,
  setScrollableTablesActive
} from "./chunk-L7AMGXND.js";
import "./chunk-ZMRB2U47.js";
import "./chunk-IBL5ATXI.js";
import "./chunk-5J5VY3BY.js";
import "./chunk-GV5FBBLH.js";
import "./chunk-ION5C52T.js";
import "./chunk-X3PKSAG6.js";
import {
  useLexicalComposerContext
} from "./chunk-LL2D5YR2.js";
import {
  require_react
} from "./chunk-4HAMFFQC.js";
import {
  __toESM
} from "./chunk-EQCVQC35.js";

// node_modules/@lexical/react/LexicalTablePlugin.dev.mjs
var import_react = __toESM(require_react(), 1);
function TablePlugin({
  hasCellMerge = true,
  hasCellBackgroundColor = true,
  hasTabHandler = true,
  hasHorizontalScroll = false
}) {
  const [editor] = useLexicalComposerContext();
  (0, import_react.useEffect)(() => {
    const hadHorizontalScroll = $isScrollableTablesActive(editor);
    if (hadHorizontalScroll !== hasHorizontalScroll) {
      setScrollableTablesActive(editor, hasHorizontalScroll);
      editor.registerNodeTransform(TableNode, () => {
      })();
    }
  }, [editor, hasHorizontalScroll]);
  (0, import_react.useEffect)(() => registerTablePlugin(editor), [editor]);
  (0, import_react.useEffect)(() => registerTableSelectionObserver(editor, hasTabHandler), [editor, hasTabHandler]);
  (0, import_react.useEffect)(() => {
    if (!hasCellMerge) {
      return registerTableCellUnmergeTransform(editor);
    }
  }, [editor, hasCellMerge]);
  (0, import_react.useEffect)(() => {
    if (hasCellBackgroundColor) {
      return;
    }
    return editor.registerNodeTransform(TableCellNode, (node) => {
      if (node.getBackgroundColor() !== null) {
        node.setBackgroundColor(null);
      }
    });
  }, [editor, hasCellBackgroundColor, hasCellMerge]);
  return null;
}
export {
  TablePlugin
};
//# sourceMappingURL=@lexical_react_LexicalTablePlugin.js.map
